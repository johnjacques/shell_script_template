################################################################################
## Environment for sudo Shells
################################################################################

## functions

function ztitle {
    # Konsole is "special", and there isn't a way to tell it's in use
    # after ssh... SO, add an option to work with it (-k).
    if [ "${1}" = "-k" ]
    then
	shift
	echo -ne "\033]30;${1}\007"
    else
	## This used to work with some terminal -- xfce maybe?
	#echo -ne "]0;${1}"
	## For gnome-terminal, ]0 instead of ]30
	echo -ne "\033]0;${1}\007"
    fi
}

function zclean {
    find . -type f -name '*~' -o -type f -name 'core' | while read file
    do
	echo "Removing $file"
	rm -f "$file"
    done
}

function zunuse {
    DISK=$1

    while read l
    do
	if [[ $l ]]
	then
	    P=$(echo $l | cut -d' ' -f 1)
	    MP=$(echo $l | cut -d' ' -f 3)
	    echo "$P is mounted as $MP, unmounting."
	    umount $MP

	    if [ $? -ne 0 ]
	    then
		echo "umount $MP failed!"
		return 1
	    fi
	fi
    done <<< $(mount | grep $DISK)

    while read l
    do
	if [[ $l ]]
	then
	    P=$(echo $l | cut -d' ' -f1)
	    echo "$P is used as swap, turning it off."
	    swapoff $P
	fi
    done <<< $(swapon -s | egrep $DISK)
}

## aliases

alias ls="ls --color=never"

## set up proxies

export no_proxy=10.0.0.0/8,192.168.0.0/16,localhost,127.0.0.0/8,intel.com
export ftp_proxy=http://proxy-us.intel.com:911
export https_proxy=http://proxy-us.intel.com:912
export socks_proxy=http://proxy-us.intel.com:1080
export NO_PROXY=10.0.0.0/8,192.168.0.0/16,localhost,127.0.0.0/8,intel.com
export FTP_PROXY=http://proxy-us.intel.com:911
export HTTPS_PROXY=http://proxy-us.intel.com:912
export HTTP_PROXY=http://proxy-us.intel.com:911
export http_proxy=http://proxy-us.intel.com:911
export SOCKS_PROXY=http://proxy-us.intel.com:1080

## disable automatic logout

unset TMOUT

## keep things clean

export TERM=xterm

## prompt and history

export PS1="[\u@\h \j] "
export HISTCONTROL=ignoreboth:erasedups

## PATH

if [ -d /export/scripts ]
then
	export PATH=/export/scripts:$PATH
fi
